---
title: Terraform
weight: 5
draft: false
---

## 什么是 IaC

IaC 是 Infrastructure as Code 的缩写，即基础设施即代码。

基础设施及代码是一种方法，**通过代码来定义和管理基础设施**，而不是通过手动操作来完成。

IaC 工具：

- Azure：ARM Template 和 Bicep
- GCP：Google Cloud Deployment Manager
- AWS：CloudFormation
- 全平台：Terraform


这些 IaC 工具采用了完全声明式模型。用户不再关注过程步骤，而是在配置文件中**定义了他们期望的基础设施状态**。

这些工具将这种状态与现实进行协调，自动执行实现结果所需的行动。Terraform 引入了**状态文件来跟踪资源，从而实现增量更新和可扩展性**，而 CloudFormation 利用 JSON 或 YAML 模板以声明方式管理 AWS 资源。两者都为命令式模型带来的挑战提供了独特的解决方案。

### 声明式和命令式

基础设施即代码（IaC）的演进，历经了从命令式到声明式的重大转变。

在早期的命令式配置管理阶段，Chef和Puppet等工具的崛起，标志着基础设施配置自动化的新篇章。这些平台通过明确地概述实现所需配置的步骤，为用户提供了一种全新的配置系统方法。然而，随着业务需求的不断变化和技术的飞速发展，单纯的命令式管理已难以满足日益复杂的环境需求。

声明式 IaC 应运而生。它打破了传统的命令式束缚。让用户能够更专注于描述目标状态，而非具体实现细节。

声明式的优点：

- **幂等性**：无论执行多少次，都能得到相同的结果。不会导致多次创建或者破坏其他资源。
- **简单，减少出错**：用户不必知道当前设置的状态，不需要指定如何从当前状态转变到目标状态。只需要定义所期望的状态，Terraform 会自动计算出当前状态与期望状态的差异，并执行必要的操作。
- **文档化**：配置文件本身就是基础设施的最新、最准确的文档。
- **版本控制与可追溯性**：基础设施代码可以像应用代码一样进行版本管理（Git），方便审查、回滚和审计。



